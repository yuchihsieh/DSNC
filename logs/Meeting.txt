************
* 25.12.14 *
************

Ben (Whatsapp)
some reading for a sunday! i think the bollobas “stubs” construction of a configuration model + the duffie-sun result gives you a reasonable model of a continuum random graph 

I only thought about the static case but they develop a dynamic model with mutations etc - that’s what you need for your purposes

this adds to what i sent you before
https://chatgpt.com/share/693e4541-f310-8011-ac24-342549623639

One thing for us to discuss Monday afternoon/evening and figure out throughout the week:

(i) how much nonstandard analysis are you/Kelvin familiar with/comfortable with
(it's not difficult, but it does require a little getting used to)

(ii) any other prerequisites you are missing

(iii) any aspects of the motivation of "why do this" that you feel like you might be missing -


I feel you might be on the cusp of something technically significant here — it's important to attack it efficiently and make decisions/progress about the research process that will lead to progress at a good pace.





************
* 25.12.15 *
************

Things that I feel I need to do:
* Duffie-Sun key ideas
* The stub construction


My update to Ben:

Duffie-Sun
* I got the structure but don't understand the details yet.
- Fubini extension and exact LLN
- Static existence, hyperfinite counting, Thm 2.4
- Static partial matching
- Dynamics: Sec.3

Loeb machinary (Internal/External)
* I read your questions and GPT's answers. I don't know how work with Loeb measure yet. I'll need to learn these details in a minimalist way. I think Duffie and Sun serves as a great example.

Bollobás' construction of the configuration model
* I reviewed it. No problems.

Bollobás on a continuum
* I read what GPT gave you. I don't understand all the details yet, but I see why you start from Bollobás and believe we can combine Duffie-Sun and Bollobás to make events like |B_2(i)| = 10 measurable (in static sense now).
I would take a closer look at how GPT built a configuration model in the DS style.

Poisson
* connectedness and giant components.
* Some measurability discussions

Graphex vs. our model
* I see why you asked GPT to compare these two things, and I was aware of the existence of this literature, not familiar with it though.
* A good thing is that our model has exact LLN so we are hopeful to characterize dynamics.


From Tuesday to Saturday I'll have 40 hours. I plan to
* Duffie and Sun Ch.2: Terminology, definitions, main results


Meanwhile, as I do not have great training in grad-level measure theory, I'll pick up all the terms that I encounter along the way.








Duffie's email to Ben:

I just thought of a simple and natural way to construct the hyperfinite random graphs and at the same time have random matching, match-induced random type changes, including (for example) trading. In fact, this is already done for graphs of order two in the AAP paper with Yeneng and Lei Qiao, because we allow pairs of agents to have enduring partnerships. These enduring partnerships form the edges of the random graph, whose vertices are the continuum of agents in our model.

One need only extend the results in the AAP paper from pairwise enduring partnerships so as to allow an agent of type k to form enduring partnerships with a given number N(k,\ell) of agents of each type \ell. Or, more generally we can allow the agent to have partnerships in any specified feasible subset G(k) \subset \N^K, where K is the number of agent types. For example, the agent can have a vector of current partnerships anywhere in a specfied subset G(k) of (0,k_1)\times (0,k_2,)\times \cdots \times (0,k_K),  for specified maximum numbers of partners k_1, \ldots,k_K of each of the K types.

For example, a red agent can meet and form a partnership with a blue agent. While they are together, they can conduct various sorts of type-changing activities, such as exchange an asset, perform a service task for one another, and so on. While they are together, the red agent can meet a green agent at some specified intensity/. The new green partner may or may not (at random) also connect to the previously connected blue agent, to form of a three-way connection, with a specified probability). They can do three-way type-changing activities while they are together. And so on. In this way, the graph evolves randomly.

The partnerships can endure just as in our AAP, with breakup intensities that depend on the connected agents. Enduring forever will generate the completely connected limit graph, provided that the Markov chain we describe is completely communicating. One doesn't want that, unless one plans to stop the model at some T and examine the properties of the current state of the graph. If one wants a static model, this graph at time T can be the model. Whether or not the partnerships are infinitely enduring or finitely enduring, the population-wide cross-sectional distributional properties at T are the deterministic solutions of the ODEs in our paper (the version with augmented types for enduring partnerships). 

With finitely enduring partnerships, the graph and its properties has a stationary distribution, given by a fixed point of the same ODE. One can begin the model with this distribution (whether randomly or deterministically). Under ergodicity conditions, the state of the graph converges to a unique distribution from any initial condition.

I'm sure you get the idea.

Warm wishes,

Darrell





************
* 25.12.16 *
************

I study the AAP 2025 slides.

--
GPT (https://chatgpt.com/share/69404c5e-3ed4-8010-878d-1de4e0618e9b):

Totally — here’s what I meant, with the “why this is a real issue” and “why Duffie’s trick sidesteps it.”

## 1) The core pathology: continuum independence fights joint measurability

When you say “each agent has her own idiosyncratic Poisson clocks / shocks, independent across agents,” you are implicitly asking for a *continuum* of independent random variables/processes indexed by (i\in I=[0,1]).

A classic (annoying) fact is:

> If you insist on the **usual product measurable structure** on (I\times\Omega), then a process (f(i,\omega)) whose coordinates (f(i,\cdot)) are independent across (i) typically **cannot be jointly measurable**, except in trivial cases.

This is exactly why the slides say “agent-level independence is impossible on the product measure space … except in the trivial case (Doob, 1953)”  and why the paper explicitly flags “measurability issues associated with a continuum of independent random variables” and moves to **Fubini extensions** . The Nonstandard Analysis book says the same thing in a sharp form (their Proposition 8.3.3: independent family is never jointly measurable in the usual product, except trivial). 

**Why you should care:** cross-sectional statistics like
[
p_k(\omega,t)=\lambda({i:\alpha(i,\omega,t)=k})
]
are only well-behaved (and become deterministic via exact LLN) if (\alpha) is measurable in the *right* sense. That’s why they carefully specify the σ-algebra and build a Fubini extension.

## 2) Why adjacency fields (A(i,j,\omega,t)) are even more delicate

In a network model, the “raw” object is often an adjacency indicator
[
A_t(i,j,\omega)\in{0,1}
]
meaning “(i) linked to (j)” at time (t).

Your “(S!-!I) link density” is then naturally a **double integral** (a statistic on (I\times I)):
[
L_{SI}(t,\omega)=\int_I\int_I A_t(i,j,\omega),\mathbf 1{\alpha(i,\omega,t)=S,\ \alpha(j,\omega,t)=I},d\lambda(i)d\lambda(j).
]

To even *define* this cleanly you need decent measurability on (I\times I\times \Omega) and the ability to apply Fubini/Tonelli-style interchanges. But the AAP “fix” (Fubini extension on (I\times\Omega)) is designed to handle **agent-indexed** randomness. Once you go to **pair-indexed** objects ((i,j)), the measurability/independence tension can reappear in a stronger way unless you build an even richer structure.

So: the moment you model the evolving sparse network as a full adjacency field, you’re back in “do we even have the right σ-algebra for these cross-sectional edge statistics?” territory.

## 3) Duffie’s suggestion is a way to avoid ever needing (A(i,j,\cdot))

This is what I meant by “encode neighborhood counts into types.”

Instead of tracking the *entire graph* (A_t), track for each agent a **finite-dimensional summary of her current neighborhood**, e.g.

* current health type: (S) or (I),
* plus a count vector: ((n_S, n_I)) = “how many (S)-neighbors and (I)-neighbors I currently have.”

That’s exactly the “(N(k,\ell))” or “(G(k)\subset\mathbb N^K)” language in Duffie’s email: an agent of type (k) carries a vector of how many partners of each type she has.

Then the infection-on-edges hazard becomes *local and one-agent*:
[
\text{hazard}*{S\to I}(i,t) ;=; \lambda*{\text{edge}} \cdot n_I(i,t).
]

And the “(S!-!I) link density” you need for aggregate dynamics becomes a **one-agent integral**, not a two-agent integral:
[
\text{(mass of (S!-!I) half-edges)} ;=; \int_I \mathbf 1{\alpha(i,t)=S}, n_I(i,t), d\lambda(i).
]
(If the graph is undirected, this already *is* the total number of (S!-!I) edges because each such edge is counted exactly once—from the (S) endpoint.)

This is “safe” because it’s the same structural form as (p(\omega,t)): a cross-sectional statistic obtained by integrating an agent-level measurable object over (i). That’s exactly the style of aggregate objects the AAP machinery is built to handle (they repeatedly form totals like (\Theta_{kl}(\omega,t)=\int_I N_{ikl}(\omega,t),d\lambda(i))). 

## 4) The meta-point

* **If you insist on modeling the full evolving adjacency field**, you’ll have to confront measurability on (I\times I) and likely build extra machinery.
* **If you only ever need finitely many local statistics per agent** (degree-by-type counts, “who is my current partner,” etc.), then you can keep everything at the agent level and let the **Fubini extension + exact LLN** do the heavy lifting.

That’s why Duffie’s suggestion “make partnerships part of the augmented type” is so attractive: it lets you study sparse networks without constantly touching (I\times I) measurability.

If you tell me what exact “link density” you want (e.g., total (S!-!I) edges, average (I)-neighbors per (S), or something involving triangles), I can show you which ones can be expressed as one-agent integrals (easy) and which ones inherently require pair/triad objects (harder).




************
* 25.12.17 *
************


Duffie and Ben's long email thread:

On Sat, Dec 13, 2025 at 7:15 PM Ben Golub <ben.golub@gmail.com> wrote:

Hi Darrell,

I hope you're well! I really enjoyed our conversations during the visit in 23-24


Thanks to some enterprising students, I'm studying your paper with Sun on independent random matchings. What would be great to have is an extension of the machinery to locally finite graphs on a continuum of nodes. Have you encountered anything like this? Do you have a sense of who might know if not?

 

Thanks so much and sorry to bother you.

Best wishes,

Ben

-

On Sat, Dec 13, 2025 at 9:18 PM, Darrell Duffie <duffie@stanford.edu> wrote:

I’ve not heard about this.  It would probably involve a hyperfinite graph. Yeneng would know, likely, whether it’s been done.  It sounds feasible to me.  What’s the application?

 

I can connect you with Yeneng if you like.

-

On Sat, Dec 13, 2025 at 9:25 PM, Ben Golub <ben.golub@gmail.com> wrote:

Application: Very similar to what one wants exact LLM for in macrofinance applications — e.g. to study contagion in a large graph, without having to worry about any of the low-probability coincidences that happen in finite random graphs. One immediate deliverable would be a rigorous version of Watts and Dodds.

 

It would be wonderful to connect with Yeneng — please feel free to forward this conversation.

 

Many thanks,

Ben

-

On Sat, Dec 13, 2025 at 8:09 PM Ben Golub <ben.golub@gmail.com> wrote:

I think one can already obtain something useful as a  corollary of your result:

Using the idea of Bollobas for forming a random graph with a given degree sequence— 


Let $\mathbf{d}=\mathbf{d}_n=\left(d_1^{(n)}, \ldots, d_n^{(n)}\right)$ be a degree sequence, i.e., a sequence of nonnegative integers with even sum. For the moment we assume only that all degrees are at most some constant $d_{\max } \geq 2$. In the following results the sequence of course depends on $n$, but often we suppress this in the notation, writing $d_i$ for the degree of vertex $i$, for example.

Let $G_{\mathbf{d}}^{\mathrm{m}}$ be the configuration multigraph with degree sequence $\mathbf{d}$, introduced by Bollobás [3], defined as follows. Let $S_1, \ldots, S_n$ be disjoint sets with $\left|S_i\right|=d_i$; we call the elements of the $S_i$ stubs. Let $\mathcal{P}$ be a pairing of $\cup S_i$, i.e., a partition of $\bigcup S_i$ into parts of size 2 , chosen uniformly at random from all such pairings. Form the multigraph $G_{\mathbf{d}}^{\mathrm{m}}$ from $\mathcal{P}$ by replacing each pair $\{s, t\}$ with $s \in S_i$ and $t \in S_j$ by an edge with endvertices $i$ and $j$.

Given a degree distribution, one can partition [0,1] into nodes having each desired degree and construct the analogue of Bollobas's stubs, and then use your continuum random matching on the stubs. We then get a continuum random multigraph, and arguments similar to yours show that the measure of nodes afflicted by bad events like multi-edges is 0, so by throwing them away we get a nice graph. 

 

best wishes,

Ben

-

On Sun, Dec 14, 2025 at 7:00 AM, Darrell Duffie <duffie@stanford.edu> wrote:

Ben

 

Yes, that sounds right. There are many ways to go. For example, you can also have regular deterministic hyperfinite graphs. For example, take  [0,1]^2 with regularly and infinitesimally spaced grid points, so that each point has four nearest neighbors. One can ignore the edges, which are negligible. Then connect  each pair of nearest neighbors, or not, at random, independently. Or connect them with probabilities that depend on whether they are north-south or east-west, and so on. Or you can do this with [0,1]^k for any integer k. Or you can tessellate the plane with any feasible geometry (e.g. hexagons), or put a grid on a torus, and so on.  I expect this is the simplest sort of graph to analyze. But handling random hyperfinite graphs is probably also feasible.

In that case, there are two levels of stochastic analysis: the construction of the graph and then the random interactions of the directly connected vertices. The exact law of large numbers, applied by someone as brilliant as Yeneng, is inevitably going to imply the obvious limit behavior from finite graphs.

 

You can also dynamically propagate the properties of vertices through interactions with nearest neighbors. For example, seed a random subset of the graph, and then allow nearest neighbors to become randomly affected, and then "contagious" or not, and thereby affect their nearest neighbors randomly, and so on. Or trade with each other, as in Mohammad's JPE paper.

 

I guess the possibilities are endless.

 

Yeneng: Ben was asking me about whether anyone has looked into extending our work. I guess the idea is to construct hyper-finite graphs with bounded degree, whether random or deterministic, and then study the implications of random matching. The ELLN should imply  deterministic cross-sectional properties of the properties of vertices. Or, in a dynamic setting, there should be deterministic evolution of the cross-sectional properties, with a stationary solution. Has anyone worked on this?

 

Best,

 

Darrell

-

From: Ben Golub <ben.golub@gmail.com>
Sent: Monday, December 15, 2025 1:11 PM
To: Darrell Duffie <duffie@stanford.edu>
Cc: Sun, Yeneng <ynsun@nus.edu.sg>
Subject: Re: Existence of independent random matching

 

 

- External Email -

 

Many thanks, Darrell, for the further thoughts and the connection.

 

The class of models you exposit is exactly what I'd hope this would be a workhorse for. There's strong demand in network theory to not have to deal with the bookkeeping of standard laws of large numbers. (For what it's worth, I find the lattice type models harder to embed into a hyperfinite framework in my mind, but that's just for lack of experience.)

 

Yenneng, I would love to get your quick take if you have a moment. To me your framework seems more suited to/more powerful for what economists need than the graphon/graphex theories that have attracted a lot of interest.

 

Thanks both - sorry for any errors in what I wrote.

 

Best,

Ben

-

On Mon, Dec 15, 2025 at 4:42 AM Sun, Yeneng <ynsun@nus.edu.sg> wrote:
Dear Ben and Darrell,

 

Thanks for reaching out.

 

Let me take a closer look and get back to you in a couple of days.

 

Best regards,

Yeneng

-

On Mon, Dec 15, 2025 at 7:06 AM, Darrell Duffie <duffie@stanford.edu> wrote:
Ben, Yeneng

I just thought of a simple and natural way to construct the hyperfinite random graphs and at the same time have random matching, match-induced random type changes, including (for example) trading. In fact, this is already done for graphs of order two in the AAP paper with Yeneng and Lei Qiao, because we allow pairs of agents to have enduring partnerships. These enduring partnerships form the edges of the random graph, whose vertices are the continuum of agents in our model.

One need only extend the results in the AAP paper from pairwise enduring partnerships so as to allow an agent of type k to form enduring partnerships with a given number N(k,\ell) of agents of each type \ell. Or, more generally we can allow the agent to have partnerships in any specified feasible subset G(k) \subset \N^K, where K is the number of agent types. For example, the agent can have a vector of current partnerships anywhere in a specfied subset G(k) of (0,k_1)\times (0,k_2,)\times \cdots \times (0,k_K),  for specified maximum numbers of partners k_1, \ldots,k_K of each of the K types.

For example, a red agent can meet and form a partnership with a blue agent. While they are together, they can conduct various sorts of type-changing activities, such as exchange an asset, perform a service task for one another, and so on. While they are together, the red agent can meet a green agent at some specified intensity/. The new green partner may or may not (at random) also connect to the previously connected blue agent, to form of a three-way connection, with a specified probability). They can do three-way type-changing activities while they are together. And so on. In this way, the graph evolves randomly.

The partnerships can endure just as in our AAP, with breakup intensities that depend on the connected agents. Enduring forever will generate the completely connected limit graph, provided that the Markov chain we describe is completely communicating. One doesn't want that, unless one plans to stop the model at some T and examine the properties of the current state of the graph. If one wants a static model, this graph at time T can be the model. Whether or not the partnerships are infinitely enduring or finitely enduring, the population-wide cross-sectional distributional properties at T are the deterministic solutions of the ODEs in our paper (the version with augmented types for enduring partnerships). 

With finitely enduring partnerships, the graph and its properties has a stationary distribution, given by a fixed point of the same ODE. One can begin the model with this distribution (whether randomly or deterministically). Under ergodicity conditions, the state of the graph converges to a unique distribution from any initial condition.

I'm sure you get the idea.

Warm wishes,

Darrell

-

On Mon, Dec 15, 2025 at 12:49 PM Ben Golub <ben.golub@gmail.com> wrote:
Hi Darrell,
This is fantastic. I didn't know about your recent paper, and this goes a long way (maybe the whole way) to providing the technical foundations that my students need for a social epidemic model. 

The only additional feature in the model they want to write beyond your description is that at the moment of initial meeting, the red agent may endogenously decide whether to transmit a state (share news about a product, etc.), which depends on the statistics of the stationary markov process - but i don't see any reason that this is not accommodated in your framework just as it stands.

Is it right to say that the only thing missing between the paper and an "evolving network" interpretation  is the language and some straightforward adaptation of the equations?

Best

Ben

-

On Mon, Dec 15, 2025 at 1:01 PM Darrell Duffie <duffie@stanford.edu> wrote:
Ben

It’s more than language that seaparates what we have in AAP from what you want.  The proofs would need to be adapted to graphs of order greater than two.  There are definitely some things to work out but the framework is pretty clearly the same. 

 Endogenous  interactions would not be that difficult.  

 -

 From: Darrell Duffie <duffie@stanford.edu>
Date: Tuesday, December 16 2025 at 4:41 AM CST
Subject: Re: Existence of independent random matching
To: Ben Golub <ben.golub@gmail.com>
Cc: Yeneng Sun <ynsun@nus.edu.sg>

Ben

The piece of our research on enduring partnerships didn't make the final publication cut.
That's covered in Appendix A of this earlier working paper version of the paper.

Warm wishes,
Darrell








-----------

My understanding of enduring matches (edited by GPT):

CTRM: The key difference is that matches can be enduring (for our purposes, focus on enduring matches). To keep the agent's evolution Markov, we must expand the state to include whether the agent is currently matched and, if so, the partner's type, because this determines the intensities of future events (breakup, meeting/formation, etc.).

To apply ELLN, CTRM uses agent-level bookkeeping by enlarging the type space and tracking the cross-sectional distribution of "extended types," e.g.

$$
\hat{p}_{k \ell}(t)=\lambda\{i \in I: \alpha(i, t)=k, g(i, t)=\ell\},
$$

which is an endpoint-counted analogue of a link-density object.

With this enlarged state, one writes a micro generator $Q(\hat{p})$. Working on a Fubini extension, CTRM constructs $(\alpha, \pi, g)$, establishes essential pairwise independence (dependence only through a $\lambda$-null set such as one's partner), and applies ELLN to conclude that $\hat{p}(\omega, t)$ is deterministic a.s.: $\hat{p}(\omega, t)= \breve{p}(t)$ for all $t \geq 0$, where $\breve{p}$ solves $\dot{\breve{p}}=\breve{p} Q(\breve{p})$.





**************
* 2026-01-14 *
**************

Kelvin

Progress
- Went through the basics of nonstandard analysis and introduced static, one-shot model of random matching on a continuum of agents. Two keys: Fubini property (by Keisler) and essential pairwise uncorrelatedness (for ELLN).

File
- DS07_Static



**************
* 2026-01-15 *
**************

Ben

- Breifly updated progress
- Learning is good. Cooking sth up (a static model with some microfoundation) is also important (this sounds like something Kelvin and I can work on now).
- Talked about pitching this to Bruno and how to pitch (See meeting logs for details) 